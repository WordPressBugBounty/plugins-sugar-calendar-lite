!function(i,t){"use strict";var e=window.SugarCalendar||{};e.Admin=e.Admin||{},e.Admin.EventMetabox={init:function(t){this.settings=t,this.$el=i(".sugar-calendar-event-details-metabox"),this.$sectionButtons=i(".sugar-calendar-metabox__navigation__button",this.$el),this.$sections=i(".sugar-calendar-metabox__section",this.$el),this.$startDate=i("#start_date",this.$el),this.$endDate=i("#end_date",this.$el),this.$allDay=i("#all_day",this.$el),this.$timezones=i(".sugar-calendar-metabox__field-row--time-zone, .event-time-zone, .event-time",this.$el),this.bindEvents(),this.initChoicesJS(),this.initDatepickers()},bindEvents:function(){this.$sectionButtons.on("click",this.onSectionButtonClick.bind(this)),this.$allDay.on("change",this.toggleTimezones.bind(this))},onSectionButtonClick:function(t){var t=i(t.currentTarget),e=t.attr("data-id"),e=this.$sections.filter(`[data-id=${e}]`);this.$sectionButtons.removeClass("selected"),this.$sections.removeClass("selected"),t.addClass("selected"),e.addClass("selected")},initChoicesJS:function(){i(".choicesjs-select",this.$el).each((t,e)=>{new Choices(e,{itemSelectText:""})})},initDatepickers:function(){i("[data-datepicker]",this.$el).datepicker({dateFormat:"yy-mm-dd",firstDay:this.settings.start_of_week,beforeShow:()=>{i("#ui-datepicker-div").removeClass("ui-datepicker").addClass("sugar-calendar-datepicker")}}),this.$startDate.on("change",()=>{this.$endDate.datepicker("option","minDate",this.getDate(this.$startDate.val()))}),this.$endDate.on("change",()=>{this.$startDate.datepicker("option","maxDate",this.getDate(this.$endDate.val()))}),this.$startDate.datepicker("option","maxDate",this.getDate(this.$endDate.val())),this.$endDate.datepicker("option","minDate",this.getDate(this.$startDate.val()))},getDate:function(e){try{e=i.datepicker.parseDate("yy-mm-dd",e)}catch(t){e=null}return e},toggleTimezones:function(){this.$allDay.prop("checked")?this.$timezones.hide():this.$timezones.show()}},e.Admin.EventMetabox.init(t),window.SugarCalendar=e}(jQuery,sugar_calendar_admin_event_meta_box);