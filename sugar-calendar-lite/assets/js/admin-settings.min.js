((s,a,t)=>{var i=window.SugarCalendar||{};i.Admin=i.Admin||{},s.fn.dateTimeFormat=function(t,i){this.each(function(){this.settings=t,this.$options=this.find('[type="radio"]:not([data-custom-option])'),this.$customOption=this.find("[data-custom-option]"),this.$customField=this.find("[data-custom-field]"),this.$formatExample=this.find("[data-format-example]"),this.$spinner=this.find("[data-spinner]"),this.debounce=null,this.$options.on("click",function(t){var t=s(t.target),i=t.parent().find("[data-format-i18n]").text();this.$customField.val(t.val()),this.$formatExample.text(i)}.bind(this)),this.$customField.on("click input",function(){this.$customOption.prop("checked",!0)}.bind(this)),this.$customField.on("input",function(){clearTimeout(this.debounce),""!==this.$customField.val()&&(this.$spinner.addClass("is-active"),this.debounce=setTimeout(()=>{s.post(this.settings.ajax_url,{task:"date_time_format",date_time_format:this.$customField.val()}).done(t=>{t.success&&t.data&&this.$formatExample.text(t.data)}).always(()=>this.$spinner.removeClass("is-active"))},400))}.bind(this))}.bind(this))},i.Admin.Settings={init:function(t){s("#screen-meta-links, #screen-meta").prependTo("#sugar-calendar-header-temp").show(),this.initDateTimeFormats(),this.initChoicesJS(),this.initSandboxToggleListener(),this.maybeInitDismissEmailWpMailSmtpNotice()},maybeInitDismissEmailWpMailSmtpNotice:function(){let a=s(".sugar-calendar-settings__emails__wpmailsmtp__notice").first();if(!(a.length<=0)){let i=a.find(".sugar-calendar-settings__emails__wpmailsmtp__notice__close").first();i.length<=0||!i.data("nonce")||i.on("click",t=>{a.hide(),s.post(sugar_calendar_admin_common.ajaxurl,{action:"dismiss_email_wp_mail_smtp_notice",nonce:i.data("nonce")})})}},initChoicesJS:function(){s(".choicesjs-select").each((t,i)=>{new a(i,{itemSelectText:""})})},initDateTimeFormats:function(){s("#sugar-calendar-setting-row-date_format").dateTimeFormat(t),s("#sugar-calendar-setting-row-time_format").dateTimeFormat(t)},initSandboxToggleListener:function(){s("#sugar-calendar-setting-sandbox").on("change",t=>{this.toggleSandboxConnectURL(s(t.target).is(":checked"))})},toggleSandboxConnectURL:function(t){var i=this,a=(s("#sugar-calendar-setting-sandbox").off("change"),s("#sugar-calendar-setting-row-stripe-connect .sugar-calendar-stripe-connect").first()),n=a.attr("href"),n=new URL(n),e=new URLSearchParams(n.search);e.set("live_mode",t?0:1),a.attr("href",n.origin+n.pathname+"?"+e.toString()),this.ajaxSaveOptions({sandbox:t?1:0},{success:function(){i.initSandboxToggleListener()},always:function(){i.initSandboxToggleListener()}})},ajaxSaveOptions:function(t,i){var a=new URL(sugar_calendar_admin_settings.ajax_url),n=new URLSearchParams(a.searchParams),a=a.origin+a.pathname,e=n.get("_wpnonce"),n=n.get("page_id");s.ajax({url:a,type:"POST",data:{action:"sugar_calendar_admin_area_handle_post",options:t,nonce:e,pageId:n},success:function(t){"function"==typeof i.success&&i.success(t)},error:function(t){"function"==typeof i.error&&i.error(t)},always:function(t){"function"==typeof i.always&&i.always(t)}})}},i.Admin.Settings.init(t),window.SugarCalendar=i})(jQuery,Choices,sugar_calendar_admin_settings,document);