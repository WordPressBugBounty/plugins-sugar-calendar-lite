var SCHandHolding=window.SCHandHolding||((e,o)=>{let a={$overlay:o("#sc-hand-holding__overlay"),$tooltip:o("#sc-hand-holding__tooltip"),$tooltipArrow:o("#sc-hand-holding__tooltip__arrow"),$tooltipClose:o("#sc-hand-holding__tooltip__close"),$tooltipTitle:o("#sc-hand-holding__tooltip strong"),$tooltipContent:o("#sc-hand-holding__tooltip #sc-hand-holding__tooltip__content"),$tooltipCurrentProgress:o("#sc-hand-holding__tooltip__footer__progress__current"),$tooltipTotalProgress:o("#sc-hand-holding__tooltip__footer__progress__total"),$nextBtn:o("#sc-hand-holding__tooltip__footer__next"),$saveDraftBtn:o("#save-post")},i={shouldCountAsExitBrowser:!0,jcStart:!1,jcCancel:!1,jcEnd:!1,stepCounter:!1,init:function(){o(i.ready)},ready:function(){switch(sugar_calendar_hand_holding.status){case"publish":i.initJCEnd();break;case"complete":break;default:i.initJCStart()}a.$tooltipTotalProgress.text(sugar_calendar_hand_holding.steps.length),i.events()},initJCStart:function(){i.jcStart=o.confirm({autoClose:!1,backgroundDismiss:!1,boxWidth:"600px",buttons:{cancel:{isHidden:!0}},content:'<div id="sc-hand-holding__start__jquery-confirm-content" class="sc-hand-holding__jquery-confirm-content"><div id="sc-hand-holding__start__jquery-confirm-content__header" class="sc-hand-holding__jquery-confirm-content__header"><img src="'+sugar_calendar_hand_holding.strings.start_modal.image_url+'" /></div><div id="sc-hand-holding__start__jquery-confirm-content__body" class="sc-hand-holding__jquery-confirm-content__body"><div id="sc-hand-holding__start__jquery-confirm-content__body__text" class="sc-hand-holding__jquery-confirm-content__body__text"><h4>'+sugar_calendar_hand_holding.strings.start_modal.content_title+"</h4><p>"+sugar_calendar_hand_holding.strings.start_modal.content+'</p></div><div id="sc-hand-holding__start__jquery-confirm-content__body__buttons" class="sc-hand-holding__jquery-confirm-content__body__buttons sc-hand-holding__btn sc-hand-holding__btn-primary"><a href="#">'+sugar_calendar_hand_holding.strings.start_modal.title+"</a></div></div></div>",draggable:!1,escapeKey:!1,theme:"sc-hand-holding",title:"",useBootstrap:!1,onContentReady:function(){let t=this;this.$content.find("#sc-hand-holding__start__jquery-confirm-content__body__buttons").on("click",function(n){n.preventDefault(),i.updateHandHoldingStatus("start"),t.close(),i.start()})}})},initJCEnd:function(){i.jcEnd=o.confirm({autoClose:!1,backgroundDismiss:!1,boxWidth:"600px",buttons:{cancel:{isHidden:!0}},content:'<div id="sc-hand-holding__end__jquery-confirm-content" class="sc-hand-holding__jquery-confirm-content"><div id="sc-hand-holding__end__jquery-confirm-content__header" class="sc-hand-holding__jquery-confirm-content__header"><img src="'+sugar_calendar_hand_holding.strings.end_modal.image_url+'" /></div><div id="sc-hand-holding__end__jquery-confirm-content__body" class="sc-hand-holding__jquery-confirm-content__body"><div id="sc-hand-holding__end__jquery-confirm-content__body__text" class="sc-hand-holding__jquery-confirm-content__body__text"><h4>'+sugar_calendar_hand_holding.strings.end_modal.content_title+"</h4><p>"+sugar_calendar_hand_holding.strings.end_modal.content+'</p></div><div class="sc-hand-holding__divider"></div><div id="sc-hand-holding__end__jquery-confirm-content__buttons" class="sc-hand-holding__jquery-confirm-content__buttons"><a class="sc-hand-holding__btn sc-hand-holding__btn-primary" id="sc-hand-holding__end__jquery-confirm-content__buttons__finish" href="#">'+sugar_calendar_hand_holding.strings.end_modal.button_finish.label+'</a><a target="_blank" id="sc-hand-holding__end__jquery-confirm-content__buttons__documentation" href="'+sugar_calendar_hand_holding.urls.sc_ext_docs+'">'+sugar_calendar_hand_holding.strings.end_modal.button_docs.label+"</a></div></div></div>",draggable:!1,escapeKey:!1,onContentReady:function(){this.$content.find("#sc-hand-holding__end__jquery-confirm-content__buttons__finish").on("click",function(n){n.preventDefault(),i.shouldCountAsExitBrowser=!1,i.updateHandHoldingStatus("complete",function(){e.location.href=sugar_calendar_hand_holding.urls.admin_calendar})})},theme:"sc-hand-holding",title:"",useBootstrap:!1})},events:function(){e.addEventListener("pagehide",i.tabExit),a.$tooltipClose.on("click",i.closeTooltip),a.$nextBtn.on("click",i.nextBtnClick),a.$saveDraftBtn.one("click",i.saveDraftBtnClick),o("#publish").one("click",i.publishBtnClick)},tabExit:function(n){var t;i.shouldCountAsExitBrowser&&navigator.sendBeacon&&((t=new FormData).append("action","sc_hand_holding_status"),t.append("nonce",sugar_calendar_hand_holding.nonce),t.append("status","exit-browser"),t.append("step",sugar_calendar_hand_holding.steps[i.stepCounter].key),navigator.sendBeacon(sugar_calendar_hand_holding.urls.ajax_url,t))},start:function(){a.$overlay.css("display","block"),i.nextStep()},closeTooltip:function(){a.$tooltip.css("display","none"),a.$overlay.css("display","none"),!1===i.jcCancel?i.jcCancel=o.confirm({autoClose:!1,backgroundDismiss:!1,boxWidth:"500px",buttons:{cancel:{isHidden:!0}},content:'<div id="sc-hand-holding__cancel__jquery-confirm-content" class="sc-hand-holding__jquery-confirm-content"><div id="sc-hand-holding__cancel__jquery-confirm-content__body" class="sc-hand-holding__jquery-confirm-content__body"><h4>'+sugar_calendar_hand_holding.strings.cancel_modal.content_title+'</h4><div id="sc-hand-holding__cancel__jquery-confirm-content__buttons" class="sc-hand-holding__jquery-confirm-content__buttons"><a id="sc-hand-holding__cancel__jquery-confirm-content__buttons__no" href="#">'+sugar_calendar_hand_holding.strings.cancel_modal.no.label+'</a><a id="sc-hand-holding__cancel__jquery-confirm-content__buttons__yes" href="#">'+sugar_calendar_hand_holding.strings.cancel_modal.yes.label+"</a></div></div></div>",draggable:!1,escapeKey:!1,onContentReady:function(){let t=this;this.$content.find("#sc-hand-holding__cancel__jquery-confirm-content__buttons__no").on("click",function(n){n.preventDefault(),t.close(),i.continueSteps()}),this.$content.find("#sc-hand-holding__cancel__jquery-confirm-content__buttons__yes").on("click",function(n){n.preventDefault(),i.shouldCountAsExitBrowser=!1,i.updateHandHoldingStatus("cancel",function(){e.location.href=sugar_calendar_hand_holding.urls.admin_calendar})})},theme:"sc-hand-holding",title:"",useBootstrap:!1}):i.jcCancel.open()},nextStep:function(){if(!1===i.stepCounter)i.stepCounter=0;else{if(sugar_calendar_hand_holding.steps[i.stepCounter].highlights.forEach(n=>{o(n).removeClass("sc-hand-holding__highlighted-element")}),o(sugar_calendar_hand_holding.steps[i.stepCounter].container).removeClass("sc-hand-holding__highlighted-element"),sugar_calendar_hand_holding.steps[i.stepCounter].complete)return void i.completeSteps();i.stepCounter++}i.performStep()},performStep:function(){var t=sugar_calendar_hand_holding.steps[i.stepCounter];if(t.complete&&a.$nextBtn.html(sugar_calendar_hand_holding.strings.done),a.$tooltipTitle.html(t.tooltip.title),a.$tooltipContent.html(t.tooltip.content),a.$tooltipCurrentProgress.text(i.stepCounter+1),"panel"===t.type&&o(t.highlights[0]).click(),void 0!==t.dummy)switch(t.key){case"details":let n=null;(n="undefined"!=typeof tinymce?tinymce.get("post_content"):n)?(n.setContent(t.dummy.value),n.fire("change"),n.save()):(n=o("#post_content")).val(t.dummy.value);break;case"duration":o("#start_date").datepicker("setDate",t.dummy.value),o("#end_date").datepicker("setDate",t.dummy.value),o("#start_time_hour").val("08"),o("#start_time_minute").val("00"),o("#end_time_hour").val("10"),o("#end_time_minute").val("00"),o("#start_time_am_pm").val("pm"),o("#end_time_am_pm").val("pm");break;default:o(t.dummy.screenReader).addClass("screen-reader-text"),o(t.dummy.field).val(t.dummy.value),o("#title").trigger("propertychange")}t.highlights.forEach(n=>{o(n).addClass("sc-hand-holding__highlighted-element")});var n=o(t.container);n.addClass("sc-hand-holding__highlighted-element");let e="right";"calendars"!==t.key&&"publish"!==t.key||(e="left"),FloatingUIDOM.computePosition(n[0],a.$tooltip[0],{placement:t.tooltip.placement,middleware:[FloatingUIDOM.offset(5),FloatingUIDOM.autoPlacement({allowedPlacements:[e]}),FloatingUIDOM.arrow({element:a.$tooltipArrow[0]})]}).then(({x:n,y:t,placement:e,middlewareData:o})=>{Object.assign(a.$tooltip[0].style,{left:n+"px",top:t+"px"});var{x:n,y:t}=o.arrow,o={top:"bottom",right:"left",bottom:"top",left:"right"}[e.split("-")[0]];Object.assign(a.$tooltipArrow[0].style,{left:null!=n?n+"px":"",top:null!=t?t+"px":"",right:"",bottom:"",[o]:"-4px"})})},continueSteps:function(){a.$tooltip.css("display","block"),a.$overlay.css("display","block"),i.performStep()},nextBtnClick:function(n){n.preventDefault(),i.nextStep()},completeSteps:function(){i.shouldCountAsExitBrowser=!1,o("#publish").trigger("click")},saveDraftBtnClick:function(n){n.preventDefault(),i.shouldCountAsExitBrowser=!1,i.updateHandHoldingStatus("draft",function(){a.$saveDraftBtn.trigger("click"),a.$tooltip.css("display","none"),a.$overlay.css("display","none")})},publishBtnClick:function(n){n.preventDefault(),i.shouldCountAsExitBrowser=!1,i.updateHandHoldingStatus("publish",function(){o("#publish").trigger("click"),a.$tooltip.css("display","none"),a.$overlay.css("display","none")})},updateHandHoldingStatus:function(n,t){"function"!=typeof t&&(t=function(){});var e=!1===i.stepCounter?0:i.stepCounter;o.post(sugar_calendar_hand_holding.urls.ajax_url,{action:"sc_hand_holding_status",status:n,nonce:sugar_calendar_hand_holding.nonce,step:sugar_calendar_hand_holding.steps[e].key},t)}};return i})((document,window),jQuery);SCHandHolding.init();