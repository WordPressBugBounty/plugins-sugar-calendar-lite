!function(n){"use strict";n(document).ready(function(){const c=document.getElementById("sugar-calendar-ticketing-event");if(c){const i=new Choices(c,{duplicateItemsAllowed:!1,itemSelectText:"",placeholderValue:sc_admin_ticketing.strings.select_event,removeItemButton:!0,removeItems:!0,searchFloor:0,searchPlaceholderValue:sc_admin_ticketing.strings.select_event,shouldSort:!1,maxItemCount:1,closeDropdownOnSelect:!0,singleModeForMultiSelect:!0,noChoicesText:sc_admin_ticketing.strings.no_results_text,loadingText:sc_admin_ticketing.strings.select_event,callbackOnInit:function(){var e=n(".sugar-calendar-ticketing__admin__list__actions__choices-events > .choices .choices__list--multiple").first(),t=n('.sugar-calendar-ticketing__admin__list__actions__choices-events .choices .choices__inner input.choices__input[type="search"]').first();e.length&&!e.is(":empty")?(t.attr("placeholder",""),t.addClass("sc-et-hide-carat")):(t.attr("placeholder",sc_admin_ticketing.strings.select_event),t.removeClass("sc-et-hide-carat"))}}),e=(i.setChoices(async()=>{try{var e=await s();if(!e.ok)throw new Error("Response status: "+e.status);var t=await e.json();if(t.success)return t.data.filter(e=>e.value!=c.value);throw new Error("Response: Unsuccessful!")}catch(e){console.error(e)}}),function(c,s){let i;function e(...e){const t=this;clearTimeout(i),i=setTimeout(()=>{c.apply(t,e)},s)}return e.cancel=function(){clearTimeout(i),i=null},e}(async function(e){try{var t=await s(e.detail.value);if(!t.ok)throw new Error("Response status: "+t.status);var c=await t.json();c.success?(i.setChoices(c.data,"value","label",!0),i.enable()):alert(c.data)}catch(e){console.error(e)}},500));c.addEventListener("search",e),c.addEventListener("addItem",function(){var e=n('.sugar-calendar-ticketing__admin__list__actions__choices-events .choices .choices__inner input.choices__input[type="search"]').first();e.attr("placeholder",""),e.addClass("sc-et-hide-carat")}),c.addEventListener("removeItem",function(){var e=n(".sugar-calendar-ticketing__admin__list__actions__choices-events > .choices .choices__list--multiple").first(),t=n('.sugar-calendar-ticketing__admin__list__actions__choices-events .choices .choices__inner input.choices__input[type="search"]').first();e.length&&e.is(":empty")&&(t.attr("placeholder",sc_admin_ticketing.strings.select_event),t.removeClass("sc-et-hide-carat"))})}function s(e=""){return fetch(sc_admin_ticketing.ajaxurl,{body:new URLSearchParams({action:sc_admin_ticketing.action,nonce:sc_admin_ticketing.nonce,searchTerm:e,isAdminList:1}),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}})}})}(jQuery);